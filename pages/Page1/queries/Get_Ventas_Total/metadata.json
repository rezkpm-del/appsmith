{
  "gitSyncId": "694ebec5a56d53482b864ab0_e6c29b12-dfaa-44de-bb40-b7472e658968",
  "id": "Page1_Get_Ventas_Total",
  "pluginId": "mysql-plugin",
  "pluginType": "DB",
  "unpublishedAction": {
    "actionConfiguration": {
      "body": "SELECT \n    -- Cantidad de ventas\n    COUNT(*) as cantidad_operaciones,\n    \n    -- Total con IVA (Nombre corregido)\n    SUM(Factura_MontoTotal) as venta_total_con_iva,\n    \n    -- Total sin IVA (Calculado: Total - IVA - Otros Impuestos)\n    SUM(Factura_MontoTotal - Factura_MontoIVA - Factura_MontoOtrosImpuestos) as venta_sin_iva,\n    \n    -- Total IVA (Nombre corregido)\n    SUM(Factura_MontoIVA) as total_iva\n    \nFROM ventas\n\nWHERE \n    -- 1. Filtro Sucursal\n    IdSucursal = {{ SelectSucursal.selectedOptionValue }}\n    \n    -- 2. Filtro Fechas\n    -- (Verifica si la columna de fecha en 'ventas' se llama 'Fecha' o 'FechaComprobante'.\n    -- Si te da error de 'Unknown column FechaComprobante', cÃ¡mbialo a 'Fecha')\n    AND FechaComprobante >= '{{ FechaDesde.formattedDate }}'\n    AND FechaComprobante <= '{{ FechaHasta.formattedDate }}'\n    \n    -- 3. Filtro Tipo Comprobante (Opcional)\n    AND (\n        {{ !SelectComprobante.selectedOptionValue }} \n        OR ComprobanteFiscal = {{ SelectComprobante.selectedOptionValue }}\n    )",
      "encodeParamsToggle": true,
      "paginationType": "NONE",
      "pluginSpecifiedTemplates": [
        {
          "value": true
        }
      ],
      "timeoutInMillisecond": 10000
    },
    "confirmBeforeExecute": false,
    "datasource": {
      "id": "Conexion_Reportes",
      "isAutoGenerated": false,
      "name": "Conexion_Reportes",
      "pluginId": "mysql-plugin"
    },
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "name": "Get_Ventas_Total",
    "pageId": "Page1",
    "runBehaviour": "MANUAL",
    "userSetOnLoad": false
  }
}